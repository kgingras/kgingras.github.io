<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Daniel Wilson</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" 
      type="image/png" 
      href="Images/Logo.ico">
    <link href="Styles/style.css" rel="stylesheet" />
    <link href="Styles/terminal.css" rel="stylesheet" />
    <link href='http://fonts.googleapis.com/css?family=Pacifico|Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

</head>
<body>
	<div id="links">
		<a class="link" href="blog">blog</a>
		<a class="link" href="mailto:wilsoda@umich.edu">contact</a>
		<a class="link" id="res" href="res/resume.pdf" download="danielwilson.pdf">resume</a>
		<a class="link" href="project">projects</a>
	</div>
	<div id="title">
		Daniel Wilson
	</div>
<!-- 	<div id="subtitle">
		MAKE A DIFFERENCE
	</div> -->
	<!-- <div id="laptop"></div> -->
    <div id="lapOut">
        <div id="lapIn">
                    <div id="lapScreen">
                    </div>
        </div>
    </div>
    <div id="lapBottom">
        <div id="thing">
        </div>
    </div>
    <div id="lapUnder">
    </div>
<form method="POST" action="http://formspree.io/wilsoda@umich.edu" name="mail" id="f">
  <input type="email" name="_replyto"></input>
  <textarea name="body"></textarea>
  <input type="submit" value="Send"></input>
</form>
</body>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="terminal.js"></script>
<script>

function validateEmail(x) {
    var atpos = x.indexOf("@");
    var dotpos = x.lastIndexOf(".");
    if (atpos< 1 || dotpos<atpos+2 || dotpos+2>=x.length) {
        return false;
    }
    return true;
}

$("#f").on("submit", function(e) {
    e.preventDefault();
});

var about = {
    me: {
        name:"Daniel Wilson",
        from:"Traverse City, MI",
        loves: [
        "Development",
        "Design",
        "Music"
        ]
    }
};

var projects = {
    DiscoCloud: {
            desc:'sycnronous group dj app',
            link:'http://discocloud.herokuapp.com',
            tech:'Node.js, ExpressJS, Socket.io',
        },
    BlitzBlock:{
            desc:'fast paced tapping game',
            link:'http://goo.gl/zqblW9',
            tech:'android',
    },
    Delivice: {
            desc:'front page for local startup',
            link:'http://delivice.github.io',
            tech:'HTML5, CSS3, Js, Github Pages',
    },
}

jQuery(function($, undefined) {
    $('#lapScreen').terminal(function(command, term) {

        if (command !== '') {
            if(command == 'help') {
                term.echo(
                    "   about          --about me\n" +
                    "   resume         --my experience\n" +
                    "   contact        --send me an email\n" +
                    "   projects       --projects I've worked on\n" +
                    "   <js>           --this is a js console");
            } 
            else if( command == 'contact' ) {
                term.push(function(command) {
            if (!validateEmail(command)) {
                term.echo('invalid email');
                term.pop();
            } //good email 
            else {
                term.pop();
                document.mail._replyto.value = command;
                term.push(function(name) {
                    term.pop();
                    document.mail.name.value = name;
                    term.push(function(msg) {
                        term.pop();
                        document.mail.body.value = msg;
                        //Send the Email
                        console.log(document.f);
                        $('#f').submit();

                            $.ajax({
                            url: "http://formspree.io/wilsoda@umich.edu",
                            method: 'POST',
                            data: $('#f').serialize(),
                            dataType: "json",
                            beforeSend: function() {
                                term.echo('sending...');
                            },
                            success: function(data) {
                                term.echo('success! thank you.');
                            },
                            error: function(err) {
                                term.echo('there was an error.');
                            }
                        });

                    }, {prompt:'Message: '});
                },{prompt:'Name: '});
            }
            }, {
                prompt: 'Email: '
            });

            } else if(command == 'resume') {
                term.push(function(command) {
                    if (command.match(/y|yes/i)) {
                        term.echo('HOORAY');
                        $('#res').click();
                        term.pop();
                    } else if (command.match(/n|no/i)) {
                        term.echo('k');
                        term.pop();
                    }
                }, {
                    prompt: 'download? '
                });

            } else if(command == 'projects') {
                term.echo(JSON.stringify(projects, null, "\t"));
            } else if(command == 'about') {
                term.echo(JSON.stringify(about, null, "\t"));
            } else {
                try {
                    var result = window.eval(command);
                    if (result !== undefined) {
                        term.echo(new String(result));
                    }
                } catch(e) {
                    term.error(new String(e));
                    term.error("Try help");
                }
            }
        } else {
           term.echo('');
        }
    }, {
        greetings: '',
        name: 'js_demo',
        prompt: '> '});
});
</script>
